# Application deployment configuration
# This file defines all applications that should be deployed on the server

# Global deployment settings
settings:
  base_path: /home/ubuntu/apps
  deployment_path: /home/ubuntu/apps/deployment
  nginx:
    ports:
      - 80
      - 443
    resources:
      limits:
        cpus: '0.5'
        memory: 512M
      reservations:
        cpus: '0.2'
        memory: 256M

# Application groups
groups:
  video-summary:
    base_path: /home/ubuntu/apps/video-summary
    apps:
      backend:
        repo: https://github.com/luisher98/video-to-summary-backend.git
        env_file: .env
        port: 5050
        resources:
          cpus: '1'
          memory: 1G
      frontend:
        repo: https://github.com/luisher98/video-to-summary-frontend.git
        env_file: .env
        port: 3000
        resources:
          cpus: '0.5'
          memory: 512M
      nginx:
        image: nginx:alpine
        ports:
          - "80:80"
          - "443:443"
        resources:
          cpus: '0.5'
          memory: 256M
        volumes:
          - ./nginx.conf:/etc/nginx/nginx.conf:ro
          - ./certbot/conf:/etc/letsencrypt
          - ./certbot/www:/var/www/certbot

# Example of another application group
# another-app:
#   base_path: /home/ubuntu/apps/another-app
#   apps:
#     service:
#       repo: https://github.com/example/another-app.git
#       env_file: .env
#       port: 8080
#       resources:
#         cpus: '0.5'
#         memory: 512M 